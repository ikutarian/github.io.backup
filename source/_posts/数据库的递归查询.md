---
title: 数据库的递归查询
date: 2019-06-13 16:11:13
tags:  
  - 数据库设计
  - SQL
  - 递归
  - 层级
categories:
  - 数据库
---

在工作中经常会遇到类似于组织机构这样有层级的数据，数据库应该怎么设计使得增删改查操作更高效？

<!-- more -->

有这样一个组织机构

{% asset_img Snipaste_2019-06-13_16-37-07.png %}

表结构如下

```sql
/* 组织机构 */
CREATE TABLE sys_org
(
  org_id     NUMBER,        /* 机构id */
  parent_id  NUMBER,        /* 父机构id */
  name       VARCHAR2(50)   /* 机构名称 */
);
```

插入一些数据

```sql
INSERT INTO sys_org (org_id, parent_id, name) VALUES (1, 0, '华南分公司');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (2, 1, '行政部');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (3, 1, '销售部');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (4, 1, '产品部');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (5, 1, '研发部');

INSERT INTO sys_org (org_id, parent_id, name) VALUES (6, 5, '后台开发');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (7, 6, 'Java开发');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (8, 6, 'Python开发');

INSERT INTO sys_org (org_id, parent_id, name) VALUES (9, 5, '前端开发');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (10, 9, '网页开发');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (11, 9, 'Android开发');
INSERT INTO sys_org (org_id, parent_id, name) VALUES (12, 9, 'iOS开发');
```